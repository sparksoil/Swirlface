@import url("./tokens.css");

/* Shadows/veils tuned to poster look */
:root{
  --hub-shadow-rgb: 27,31,51;
  --hub-veil: color-mix(in srgb, var(--surface) 88%, transparent);
  --hub-ring: color-mix(in srgb, var(--cup-mint) 26%, transparent);
}

*{box-sizing:border-box}
html,body{height:100%}

/* Background wash (art pastels, not baby) */
body{
  background:
    radial-gradient(1400px 960px at 10% 0%, color-mix(in srgb, var(--glow-apricot) 72%, transparent) 0 48%, transparent 80%),
    radial-gradient(1100px 880px at 90% 8%,  color-mix(in srgb, var(--glow-rose) 64%,    transparent) 0 44%, transparent 78%),
    radial-gradient(1180px 900px at 50% 88%, color-mix(in srgb, var(--glow-sky) 58%,     transparent) 0 46%, transparent 82%),
    var(--paper);
  background-attachment: fixed;
  color:var(--ink);
  font:16px/1.45 ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif;
}

/* Toolbar */
.lab-toolbar{
  position:fixed; top:clamp(12px,3vw,26px); left:50%; transform:translateX(-50%);
  width:min(760px, calc(100% - clamp(32px,10vw,88px)));
  display:flex; align-items:center; gap:clamp(10px,3vw,20px); flex-wrap:wrap;
  padding:10px clamp(14px,3vw,20px);
  background:var(--hub-veil);
  backdrop-filter: blur(16px);
  border-radius:18px; border:1px solid var(--hub-ring);
  box-shadow: 0 20px 40px -28px rgba(var(--hub-shadow-rgb),0.24);
  z-index:12;
}
.brand{ display:flex; align-items:center; gap:10px; font-weight:600; color:color-mix(in srgb, var(--ink-soft) 92%, transparent); }
.swirl-dot{ width:16px; height:16px; border-radius:50%; background:conic-gradient(from 0deg, var(--glow-sky), var(--glow-apricot), var(--glow-rose), var(--accent1), var(--glow-sky)); box-shadow:0 0 0 1px color-mix(in srgb, var(--accent1) 28%, transparent) inset; }
.pill{ appearance:none; border:1px solid transparent; border-radius:999px; padding:8px 16px; background:color-mix(in srgb, var(--surface) 94%, transparent); box-shadow:0 6px 18px -14px rgba(var(--hub-shadow-rgb),0.3); cursor:pointer; color:var(--ink); font-size:.95rem; }
#crumbBox{ flex:1 1 clamp(240px,44vw,420px); min-width:clamp(220px,42vw,320px); background:color-mix(in srgb, var(--surface-strong) 96%, transparent); border:1.5px solid color-mix(in srgb, var(--accent1) 26%, transparent); }

/* Pond + hero */
#pond{
  position:relative; min-height:100dvh; display:grid; place-items:center;
  padding: clamp(200px, 36vh, 300px) clamp(20px, 6vw, 48px) clamp(210px, 44vh, 320px);
}

.site-banner{
  position:absolute; top:clamp(108px,24vh,188px); left:50%; transform:translateX(-50%);
  text-align:center; width:min(440px, calc(100vw - 72px));
  padding:.75rem 1.6rem 1.05rem; border-radius:20px;
  background: linear-gradient(165deg, color-mix(in srgb, var(--surface-strong) 96%, transparent) 0%, color-mix(in srgb, var(--glow-apricot) 22%, var(--surface-strong)) 100%);
  border:1px solid color-mix(in srgb, var(--accent1) 18%, transparent);
  backdrop-filter: blur(12px); z-index:9; pointer-events:none;
  box-shadow: 0 20px 46px -32px rgba(var(--hub-shadow-rgb),0.28), inset 0 1px 0 color-mix(in srgb, #fff 35%, transparent);
}
.site-banner h1{ margin:0; font-size:2.2rem; font-weight:700; color:color-mix(in srgb, var(--ink-soft) 96%, transparent); }
.site-banner .site-subtitle{ margin:8px 0 0; font-size:1.1rem; color:color-mix(in srgb, var(--ink-mist) 86%, transparent); }

/* Ripples */
#pond::before{
  content:""; position:absolute; inset:-22%;
  background:
    radial-gradient(circle at 50% 38%, color-mix(in srgb, var(--glow-apricot) 64%, transparent) 0 34%, transparent 74%),
    radial-gradient(circle at 52% 64%, color-mix(in srgb, var(--glow-sky) 60%, transparent) 0 28%, transparent 52%),
    radial-gradient(circle at 48% 34%, color-mix(in srgb, var(--glow-rose) 58%, transparent) 0 22%, transparent 56%),
    repeating-radial-gradient(circle at 50% 50%, color-mix(in srgb, var(--ring-peach) 58%, transparent) 0 2px, transparent 2px 16px);
  mix-blend-mode: soft-light;
  animation: ripple 22s ease-in-out infinite; pointer-events:none;
}
@keyframes ripple{ 0%,100%{transform:scale(1);opacity:.6} 50%{transform:scale(1.05);opacity:.82} }

/* Swirl dish + your sprout SVG/PNG */
.swirl{
  position:relative; width: clamp(260px, 38vw, 400px); aspect-ratio:1/1; border-radius:50%;
  display:grid; place-items:center; padding: clamp(24px, 4.4vw, 44px);
  background:
    radial-gradient(68% 64% at 50% 34%, color-mix(in srgb, var(--surface-strong) 96%, transparent) 0 58%, transparent 84%),
    radial-gradient(92% 86% at 50% 74%, color-mix(in srgb, var(--glow-apricot) 54%, transparent) 0 72%, transparent 92%);
  box-shadow: inset 0 0 30px color-mix(in srgb, var(--glow-apricot) 48%, transparent), 0 34px 70px -42px rgba(var(--hub-shadow-rgb),0.35);
  animation: breathe 7s ease-in-out infinite; z-index:7; isolation:isolate;
}
.swirl::before{
  content:""; position:absolute; inset:-42px; border-radius:50%;
  background:
    radial-gradient(78% 72% at 48% 32%, color-mix(in srgb, var(--glow-rose) 62%, transparent) 0 56%, transparent 86%),
    radial-gradient(84% 78% at 54% 70%, color-mix(in srgb, var(--glow-sky) 58%, transparent) 0 58%, transparent 88%);
  opacity:.9; filter:blur(34px); z-index:-1;
}
@keyframes breathe{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.03)} }
.swirl-svg{ width:min(82%, 320px); height:auto; filter: drop-shadow(0 12px 24px rgba(var(--hub-shadow-rgb),0.18)); z-index:1; }

.enter-day{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:clamp(96px,15vw,140px); height:clamp(96px,15vw,140px); border-radius:50%; background:transparent; border:0; z-index:8; }
.enter-day:hover{ box-shadow:0 0 0 12px color-mix(in srgb, var(--accent1) 16%, transparent); border-radius:50%; }

/* Tokens (orbit + glow pulses) */
.token{
  --size: clamp(78px, 11vw, 102px);
  --token-color: var(--token-self);
  --orbit-duration: 36s;
  --pulse-duration: 7.5s;
  --pulse-delay: 0s;
  position:absolute; width:var(--size); height:var(--size); border-radius:50%; border:none; cursor:pointer;
  display:flex; align-items:center; justify-content:center; text-align:center; padding:0 10px;
  color:color-mix(in srgb, var(--ink) 90%, transparent); font-weight:600; font-size:.92rem; letter-spacing:.18px;
  background:
    radial-gradient(circle at 32% 26%, color-mix(in srgb, var(--surface-strong) 92%, transparent) 0 48%, transparent 72%),
    linear-gradient(160deg, color-mix(in srgb, var(--token-color) 86%, var(--surface) 14%), color-mix(in srgb, var(--token-color) 74%, var(--accent1) 26%));
  box-shadow:0 16px 36px -28px rgba(var(--hub-shadow-rgb),0.32);
  transition: transform .25s ease, box-shadow .25s ease, background .3s ease, filter .3s ease;
  animation: drift var(--orbit-duration) linear infinite; z-index:5; isolation:isolate;
}
.token::after{
  content:""; position:absolute; inset:-16px; border-radius:inherit;
  background:radial-gradient(circle at 50% 50%, color-mix(in srgb, var(--token-color) 64%, transparent) 0 56%, transparent 76%);
  opacity:0; filter: blur(.5px); transform:scale(.86); pointer-events:none; z-index:-1;
  animation: token-glow var(--pulse-duration) ease-in-out infinite; animation-delay: var(--pulse-delay);
}
@keyframes drift{
  from{ transform: rotate(var(--angle,0deg)) translate(var(--radius,160px)) rotate(calc(var(--angle,0deg)*-1)); }
  to  { transform: rotate(calc(var(--angle,0deg)+360deg)) translate(var(--radius,160px)) rotate(calc(var(--angle,0deg)*-1-360deg)); }
}
@keyframes token-glow{
  0%,100%{ opacity:0; transform:scale(.8); filter:blur(.5px); }
  42%    { opacity:.56; transform:scale(1.12); filter:blur(6px); }
  60%    { opacity:.2; transform:scale(1.02); filter:blur(2.5px); }
}
.token[data-pillar="divine"]{ --token-color: var(--token-divine); }
.token[data-pillar="family"]{ --token-color: var(--token-family); }
.token[data-pillar="self"]  { --token-color: var(--token-self); }
.token[data-pillar="rrr"]   { --token-color: var(--token-rrr); }
.token[data-pillar="work"]  { --token-color: var(--token-work); }

/* Structured mode = calm ring */
body.mode-structured .token{ animation-play-state: paused; transform: rotate(var(--angle,0deg)) translate(210px) rotate(calc(var(--angle,0deg)*-1)); transition: transform .45s ease; }
