/* ================================
   Swirlface Dev Lab — Styles
   Palette = art-pastels (not baby)
   ================================ */

/* ~lines 6-38: base + palette */
:root{
  --ink: #2a2a2a;
  --veil: rgba(255,255,255,0.5);
  --ring: rgba(0,0,0,0.08);

  /* glow + shimmer */
  --glow: 0 12px 26px rgba(0,0,0,0.12), 0 0 0 1px rgba(0,0,0,0.06);
  --glow-strong: 0 18px 42px rgba(0,0,0,0.18), 0 0 0 1px rgba(0,0,0,0.08);

  /* artsy gradient backdrop (sunrise swirl) */
  --bg-a: #fddbcf;   /* vibrant peach */
  --bg-b: #d0e4ff;   /* lively periwinkle */
  --bg-c: #f8c4e3;   /* rosy glow */
  --bg-d: #c7f5d7;   /* mint breeze */
}

* { box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--ink); font: 16px/1.45 ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif;
  background:
    radial-gradient(1200px 800px at 20% 10%, var(--bg-a), transparent 60%),
    radial-gradient(900px 900px at 80% 0%, var(--bg-b), transparent 50%),
    radial-gradient(900px 900px at 0% 90%, var(--bg-c), transparent 45%),
    radial-gradient(900px 900px at 100% 85%, var(--bg-d), transparent 50%),
    #ece9e4;
}

/* ~lines 40-78: toolbar */
.lab-toolbar{
  position:fixed; inset: 16px 16px auto 16px;
  display:flex; align-items:center; justify-content:space-between;
  gap:16px; padding:10px 12px;
  background:rgba(255,255,255,0.55); backdrop-filter: blur(8px);
  border-radius:14px; box-shadow: var(--glow);
  z-index: 10;
}
.brand{ display:flex; align-items:center; gap:10px; }
.swirl-dot{
  width:18px; height:18px; border-radius:50%;
  background:conic-gradient(from 0deg, #9fb5c9, #e5c5b8, #d1e0cb, #c59ab2, #9fb5c9);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.08) inset;
}
.pill{
  appearance:none; border:0; border-radius:999px; padding:8px 14px;
  background:#f1efe8; box-shadow: var(--glow); cursor:pointer;
}
.pill.active{ background:#fff; box-shadow: var(--glow-strong); }
.modes{ display:flex; gap:8px; }
#crumbBox{ flex:1; min-width:160px; }

/* ~lines 80-144: pond + swirl + ripples */
#pond{
  position:relative; height:100dvh; width:100%;
  overflow:hidden;
  display:grid; place-items:center;
}

.site-banner{
  position:absolute;
  top:40px; left:50%; transform:translateX(-50%);
  text-align:center;
  z-index:6; pointer-events:none;
}
.site-banner h1{
  margin:0; font-size:2.1rem; font-weight:700;
  background:linear-gradient(90deg,#ff9a9e,#fad0c4,#fbc2eb,#a1c4fd,#c2e9fb);
  -webkit-background-clip:text; color:transparent;
}
.site-banner p{
  margin:6px 0 0; font-size:1.15rem; letter-spacing:0.5px;
  color:rgba(0,0,0,0.75);
}

/* soft rippling field (a hair stronger so rings read) */
#pond::before{
  content:""; position:absolute; inset:-20%;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.55), transparent 45%),
    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,0.22) 0 2px,
      transparent 2px 10px);
  mix-blend-mode: soft-light;
  animation: ripple 16s ease-in-out infinite;
  pointer-events:none;
}
@keyframes ripple{
  0%,100%{ transform: scale(1); opacity:0.6; }
  50%    { transform: scale(1.06); opacity:0.8; }
}

.swirl{
  width:220px; height:220px; border-radius:50%;
  display:grid; place-items:center;
  color:#6e5fbf;
  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.08));
  animation: breathe 6.5s ease-in-out infinite;
}
@keyframes breathe{ 0%,100%{ transform:scale(1)} 50%{ transform:scale(1.03)} }
.swirl-svg{ width:82%; height:82%; }
.enter-day{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:90px; height:130px; border-radius:60px 60px 8px 8px;
  background:rgba(255,255,255,0.75); box-shadow: var(--glow-strong);
  display:block;
}

/* ~lines 146-220: tokens (circles → doors) */
.token{
  --size: 88px;
  position:absolute; inset:auto;
  width:var(--size); height:var(--size); border-radius:50%;
  border:none; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  text-align:center; padding:0 8px;
  color:#2b2b2b; font-weight:600; letter-spacing:0.2px;
  background:
    radial-gradient(circle at 35% 28%, rgba(255,255,255,0.65), transparent 45%),
    linear-gradient(145deg,
      hsl(var(--hue) var(--sat) calc(var(--lit) + 6%)),
      hsl(var(--hue) calc(var(--sat) - 6%) calc(var(--lit) - 8%)));
  box-shadow:
    var(--glow),
    0 0 0 0 hsla(var(--hue), 60%, 60%, 0); /* reserved for hover aura */
  transition: transform .25s ease, border-radius .35s ease, box-shadow .25s ease, width .35s ease, height .35s ease, background .35s ease;
  animation: drift linear infinite;
  /* custom orbit values get set inline by JS */
}
.token:hover{
  box-shadow:
    var(--glow-strong),
    0 0 18px 4px hsla(var(--hue), 60%, 60%, .25);
  transform: translateZ(0) scale(1.045);
}

/* morph into ARCH DOOR on click (with wood slats + aura) */
.token.door{
  --size: 120px;
  width:150px; height:190px;
  border-radius: 90px 90px 14px 14px; /* arch */
  background:
    radial-gradient(circle at 38% 12%, rgba(255,255,255,0.75), transparent 40%),
    repeating-linear-gradient(90deg,
      rgba(255,255,255,0.06) 0 7px,
      rgba(0,0,0,0.06) 7px 9px),
    linear-gradient(165deg,
      hsl(var(--hue) var(--sat) calc(var(--lit) + 3%)),
      hsl(var(--hue) calc(var(--sat) - 10%) calc(var(--lit) - 14%)));
  box-shadow:
    0 10px 26px rgba(0,0,0,0.20),
    0 0 0 1px rgba(0,0,0,0.08) inset,
    0 0 24px 8px hsla(var(--hue), 60%, 60%, .35);
  animation-play-state: paused; /* stop drifting when it becomes a door */
  position: relative;
  outline: 2px solid rgba(0,0,0,0.06);
  outline-offset: 0;
  transition: box-shadow .3s ease, transform .25s ease;
}

/* tiny knob */
.token.door::after{
  content:"";
  position:absolute; right:18px; top:54%;
  width:12px; height:12px; border-radius:50%;
  background:rgba(0,0,0,0.42);
  transform: translateY(-50%);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.45) inset,
    0 2px 4px rgba(0,0,0,0.25);
}

/* star glimmer that pulses on active door */
.token.door::before{
  content:"";
  position:absolute; left:16%; top:20%;
  width:10px; height:10px;
  background:
    radial-gradient(circle, #fff 0 40%, transparent 41%),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,.9), transparent 55%);
  border-radius:50%;
  filter: drop-shadow(0 0 10px hsla(var(--hue), 80%, 70%, .6));
  animation: door-glimmer 3.6s ease-in-out infinite;
  opacity:0;
}
@keyframes door-glimmer{
  0%,35%{ transform: scale(.2); opacity:0; }
  36%,45%{ transform: scale(1);  opacity:.9; }
  55%,100%{ transform: scale(.2); opacity:0; }
}

/* orbit motion */
@keyframes drift{
  from { transform: rotate(var(--angle, 0deg)) translate(var(--radius, 160px)) rotate(calc(var(--angle, 0deg) * -1)); }
  to   { transform: rotate(calc(var(--angle, 0deg) + 360deg)) translate(var(--radius, 160px)) rotate(calc(var(--angle, 0deg) * -1 - 360deg)); }
}

/* ~lines 222-260: modes + a11y */
body.mode-structured .token{
  animation-play-state: paused;
  /* snap into a quiet ring when Structured mode is on */
  transform: rotate(var(--angle,0deg)) translate(210px) rotate(calc(var(--angle,0deg) * -1));
  transition: transform .45s ease;
}
body.mode-structured #pond{ place-items: center; }
body.mode-structured #dropCrumb{ display:none; }

.sparkles{
  position:absolute; inset:0; pointer-events:none;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.9), transparent 65%),
    radial-gradient(1.5px 1.5px at 72% 40%, rgba(255,255,255,0.9), transparent 65%),
    radial-gradient(1.7px 1.7px at 34% 70%, rgba(255,255,255,0.9), transparent 65%),
    radial-gradient(1.8px 1.8px at 60% 78%, rgba(255,255,255,0.9), transparent 65%);
  animation: twinkle 8s ease-in-out infinite;
  opacity:0.55;
}
@keyframes twinkle{ 0%,100%{ opacity:0.25 } 50%{ opacity:0.7 } }

/* reduced motion kindness */
@media (prefers-reduced-motion: reduce){
  #pond::before, .swirl, .token, .sparkles{ animation: none !important; }
}
